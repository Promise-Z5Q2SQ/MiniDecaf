# MiniDecaf实验Step2实验报告

<div style="text-align: center;">2018011358 朱书琦</div>

## 实验内容

本步骤中主要在上一步的基础上实现了一元运算符的编译，为此新增的语法规范如下，其中`unary`以递归的方式定义了一元运算符的语法规则。

```
expr: unary;

unary: NUM | ('-'|'!'|'~') unary;
```

在代码中的增加了非终结符`unary`的`visit`函数根据含有子节点的数目分类讨论，并实现了`stackPush`和`stackPop`函数来实现压栈和弹出操作，再利用栈操作完成上述的递归调用。

## 思考题

1. 我们在语义规范中规定整数运算越界是未定义行为，运算越界可以简单理解成理论上的运算结果没有办法保存在32位整数的空间中，必须截断高于32位的内容。请设计一个表达式，只使用`-~!`这三个单目运算符和 $[0, 2^{31} - 1]$ 范围内的非负整数，使得运算过程中发生越界。

    对 $2^{31}-1$ 先按位取反，得到 $-2^{31}$，再取负即越界。

## 相关参考

如实验内容部分所述，主要参考了实验指导书和所给的 java 样例代码。